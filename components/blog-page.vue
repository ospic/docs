<template>
  <v-container class="grey lighten-3" fluid>
    <v-app-bar class="primary" flat dark dense fixed app>
      <img src="@/static/logo.png" alt="Vuetify.js" height="100%" />
      <nuxt-link to="/">
        <v-toolbar-title
          v-if="$vuetify.breakpoint.mdAndUp"
          class="mx-0 title white--text plain-link"
          >{{ $t("apptitle") }}</v-toolbar-title
        ></nuxt-link
      >
      <v-avatar>
        <img
          src="https://library.kissclipart.com/20181003/szw/kissclipart-free-corner-ribbon-png-clipart-logo-f2cbd51c4ca46d94.png"
          alt="John"
        />
      </v-avatar>
      <v-spacer></v-spacer>
      <h5 v-if="isMdAndUp">Language:</h5>
      <div v-if="isMdAndUp" class="text-center">
        <v-menu offset-y>
          <template v-slot:activator="{ on, attrs }">
            <v-btn
              text
              dark
              small
              v-bind="attrs"
              v-on="on"
              style="text-transform:none;"
            >
              {{ locale.name }} <v-icon>mdi-menu-down</v-icon>
            </v-btn>
          </template>
          <v-list>
            <v-list-item v-for="(locale, index) in locales" :key="index">
              <nuxt-link
                class="primary--text"
                :to="switchLocalePath(locale.code)"
                >{{ locale.name }}</nuxt-link
              >
            </v-list-item>
          </v-list>
        </v-menu>
      </div>

      <a href="https://github.com/ospic/docs" target="_blank">
        <v-btn text fab x-small target="_blank">
          <v-icon>mdi-github</v-icon>
        </v-btn>
      </a>
      <a href="https://app.ospicx.com/" target="_blank">
        <v-btn text fab x-small>
          <v-icon>mdi-web</v-icon>
        </v-btn></a
      >
      <v-app-bar-nav-icon
        v-if="!isMdAndUp"
        @click.stop="drawer = !drawer"
      ></v-app-bar-nav-icon>
    </v-app-bar>

    <v-navigation-drawer
      v-model="drawer"
      mini-variant.sync="mini"
      overlay-color="primary"
      app
      right
      height="100%"
      class="pa-3"
      v-if="!isMdAndUp"
    >
      <h2 class="pa-2">Pages</h2>
      <v-pages :pages="pages"></v-pages>
      <template v-slot:append>
        <h5>{{ $t("selectlanguage") }}</h5>
        <div class="text-center">
          <v-menu offset-y>
            <template v-slot:activator="{ on, attrs }">
              <v-btn
                text
                color="primary"
                small
                block
                v-bind="attrs"
                v-on="on"
                style="text-transform:none; primary--text"
              >
                {{ locale.name }} <v-icon>mdi-menu-down</v-icon>
              </v-btn>
            </template>
            <v-list dense>
              <v-list-item
                dense
                v-for="(locale, index) in locales"
                :key="index"
              >
                <nuxt-link
                  class="primary--text"
                  :to="switchLocalePath(locale.code)"
                  >{{ locale.name }}</nuxt-link
                >
              </v-list-item>
            </v-list>
          </v-menu>
        </div>
      </template>
    </v-navigation-drawer>

    <v-container fluid>
      <v-row>
        <v-col cols="12" sm="2" v-if="post.toc.length > 0 && isMdAndUp">
          <v-sheet rounded="lg" min-height="268" class="pa-3">
            <v-nav :post="post"></v-nav>
          </v-sheet>
        </v-col>

        <v-col cols="12" :sm="post.toc.length > 0 ? '8' : '10'">
          <v-sheet rounded="lg">
            <div>
            <div class="post-header">
              <h1 class="h1 post-h1">{{ post.title }}</h1>
              <p v-if="post.description" class="excerpt">
                {{ post.description }}
              </p>
              <div class="post-tags d-flex justify-space-between">
                <v-tags :tags="post.tags" />
                Last updated: {{ formatDate(post.updatedAt) }}
              </div>
            </div>
            <nuxt-content :document="post" />
              <v-author v-if="post.author" :author="post.author"></v-author>
            </div>
            <sheet-footer>
               <prev-next :prev="prev" :next="next" />
            </sheet-footer>
            
          </v-sheet>
        </v-col>

        <v-col
          cols="12"
          :sm="$vuetify.breakpoint.smOnly ? '4' : '2'"
          v-if="$vuetify.breakpoint.smAndUp"
        >
          <v-sheet rounded="lg" min-height="268" class="pa-5">
            <v-pages :pages="pages"></v-pages>
          </v-sheet>
        </v-col>
      </v-row>
    </v-container>
  </v-container>
</template>
<script>
export default {
  props: ["pages", "post", "prev", "next"],
  components: {
    // A simple helper component
    SheetFooter: {
      functional: true,

      render(h, { children }) {
        return h(
          "v-sheet",
          {
            staticClass: "d-flex flex-row align-self-stretch",
            props: {
              color: "grey lighten-2",
              dark: true,
              height: 50
            }
          },
          children
        );
      }
    }
  },
  data() {
    return {
      clipped: false,
      drawer: false,
      fixed: false,
      mini: true,

      miniVariant: false,
      right: true,
      rightDrawer: false,
      title: "Ospic documentation",
    
    };
  }
};
</script>
